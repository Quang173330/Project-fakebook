<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<div class="container">
    <h1>Chat</h1>
    <form id="chatForm">
        <input id="chat-input" type="text" /> Content
        <br />
        <input id="chat-user-id" type="text" /> User ID
        <br />
        <input type="submit" value="Send" />
    </form>
    <div id="chat"></div>
</div>
<script src="/socket.io/socket.io.js"></script>

<script>
    const socket = io();
    $("#chatForm").submit(() => {
        let text = $("#chat-input").val();
        let userId = $("#chat-user-id").val();
        socket.emit("message", {
            Content: text,
            Sender: userId,
        });
        return false;
    });
    // socket.on("joinchat", (message) => {
    //     displayMessage(message.welcomeText);
    // });
    socket.on("message", (message) => {
        displayMessage(message);
    });
    socket.on("load all messages", (data) => {
        data.forEach((message) => {
            displayMessage(message);
        });
    });
    let displayMessage = (message) => {
        console.log(message);
        $("#chat").prepend(
            $("<li>").html(`<strong>${message.Sender}: ${message.Content}</strong>`)
        );
    };
</script>